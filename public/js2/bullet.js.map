{"version":3,"sources":["../js/bullet.js"],"names":["Bullet","data","id","team","creator","Object","assign","stats","position","V2D","x","y","velocity","length","speed","angle","add","radius","hp","LIFESPAN","lifespan","life_counter","disabled","dt","mul_","ENV","game","removeBullet","MAX_RADIUS","SPEED","velocity_effect"],"mappings":";;;;;;IAAMA,M;AAEJ,kBAAYC,IAAZ,EAAkB;AAAA;;AAChB,SAAKC,EAAL,GAAUD,KAAKC,EAAf;AACA,SAAKC,IAAL,GAAYF,KAAKE,IAAjB;AACA,SAAKC,OAAL,GAAeH,KAAKG,OAApB,CAHgB,CAGa;;AAE7BC,WAAOC,MAAP,CAAc,IAAd,EAAoBN,OAAOO,KAA3B;;AAEA;AACA,SAAKC,QAAL,GAAgB,IAAIC,GAAJ,CAAQR,KAAKO,QAAL,CAAcE,CAAtB,EAAyBT,KAAKO,QAAL,CAAcG,CAAvC,CAAhB;;AAEA,SAAKC,QAAL,GAAgB,IAAIH,GAAJ,EAAhB;AACA,SAAKG,QAAL,CAAcC,MAAd,GAAuBZ,KAAKa,KAA5B;AACA,SAAKF,QAAL,CAAcG,KAAd,GAAsBd,KAAKc,KAA3B;AACA,SAAKH,QAAL,CAAcI,GAAd,CAAkBf,KAAKW,QAAvB;AACA;;AAEA,SAAKK,MAAL,GAAchB,KAAKgB,MAAnB;;AAEA,SAAKC,EAAL,GAAUjB,KAAKiB,EAAf;AACA,SAAKC,QAAL,GAAgBlB,KAAKmB,QAArB;;AAEA,SAAKC,YAAL,GAAoB,CAApB;AACA,SAAKC,QAAL,GAAgB,KAAhB;AACD;;;;2BAEMC,E,EAAI;AACT,WAAKf,QAAL,CAAcQ,GAAd,CAAkB,KAAKJ,QAAL,CAAcY,IAAd,CAAmBD,EAAnB,CAAlB;AACA,UAAG,CAAC,KAAKF,YAAL,IAAmBE,EAApB,IAA0B,KAAKJ,QAAlC,EAA4C;AAC1C,aAAKG,QAAL,GAAgB,IAAhB;AACAG,YAAIC,IAAJ,CAASC,YAAT,CAAsB,KAAKzB,EAA3B;AACD;AACF;;;2BAEMgB,E,EAAI;AAAE;AACX,WAAKA,EAAL,IAAWA,EAAX;AACA,aAAO,KAAKI,QAAL,GAAiB,KAAKJ,EAAL,IAAW,CAAnC;AACD;;;;;;AAGHlB,OAAOO,KAAP,GAAe;AACbqB,cAAY,EADC;AAEb;AACAC,SAAO,GAHM,EAGD;AACZC,mBAAiB,UAJJ,CAIe;AAJf,CAAf","file":"bullet.js","sourcesContent":["class Bullet {\n\n  constructor(data) {\n    this.id = data.id;\n    this.team = data.team;\n    this.creator = data.creator; // id\n\n    Object.assign(this, Bullet.stats);\n\n    // needs work\n    this.position = new V2D(data.position.x, data.position.y);\n\n    this.velocity = new V2D();\n    this.velocity.length = data.speed;\n    this.velocity.angle = data.angle;\n    this.velocity.add(data.velocity);\n    // this.velocity.add(V2D.proj(data.velocity, this.velocity));\n\n    this.radius = data.radius;\n\n    this.hp = data.hp;\n    this.LIFESPAN = data.lifespan;\n\n    this.life_counter = 0;\n    this.disabled = false;\n  }\n\n  update(dt) {\n    this.position.add(this.velocity.mul_(dt));\n    if((this.life_counter+=dt) > this.LIFESPAN) {\n      this.disabled = true;\n      ENV.game.removeBullet(this.id);\n    }\n  }\n\n  damage(hp) { // TODO: create a damagable or health-capable protocol ... https://github.com/Gozala/protocol\n    this.hp -= hp;\n    return this.disabled = (this.hp <= 0);\n  }\n}\n\nBullet.stats = {\n  MAX_RADIUS: 12,\n  // radius: 8, //8,\n  SPEED: 200, //600 //px/s\n  velocity_effect: 'combined' // 'combined' or 'projected'\n};\n"]}