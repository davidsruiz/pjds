{"version":3,"sources":["../js/results.js"],"names":["RESULTS","layer_node","getLayerNode","document","querySelector","load","game_data","clear_DOM","summary","structure","layer","forEach","team","i","results_team","createElement","results_team_win_state","results_team_score","results_players","COLOR","hexToRgb","color","r","g","b","RGBAcolor","className","textContent","style","score","players","player","results_player","results_player_name","results_player_score","backgroundColor","appendChild","myNode","children","removeChild","model","teams","scores","number","push","name","kills","deaths","sort","a"],"mappings":"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","file":"results.js","sourcesContent":["let RESULTS = {\n  layer_node: null,\n  getLayerNode: function() {\n    return this.layer_node ? this.layer_node : this.layer_node = document.querySelector('#results_layer');\n  },\n  load: function(game_data) {\n    this.clear_DOM();\n\n    var summary = this.structure(game_data),\n        layer = this.getLayerNode();\n\n    summary.forEach((team, i)=>{\n      var results_team = document.createElement('div'),\n          results_team_win_state = document.createElement('span'),\n          results_team_score = document.createElement('span'),\n          results_players = document.createElement('div');\n      var {r, g, b} = COLOR.hexToRgb(team.color);\n      var RGBAcolor = `rgba(${r}, ${g}, ${b}, 0.3)`;\n\n      results_team.className = 'results_team';\n      results_team_win_state.className = 'results_team_win_state';\n      results_team_win_state.textContent = i == 0 ? 'WIN' : 'LOSE';\n      results_team_win_state.style.color = team.color;\n      results_team_score.className = 'results_team_score';\n      results_team_score.textContent = team.score;\n      results_players.className = 'results_players';\n\n      team.players.forEach((player)=>{\n        var results_player = document.createElement('span'),\n            results_player_name = document.createElement('span'),\n            results_player_score = document.createElement('span');\n\n        results_player.className = 'results_player';\n        results_player.style.backgroundColor = RGBAcolor;\n        results_player_name.className = 'results_player_name';\n        results_player_name.textContent = player[0];\n        results_player_score.className = 'results_player_score';\n        results_player_score.textContent = `${player[1]}+ ${player[2]}-`;\n\n        results_player.appendChild(results_player_name);\n        results_player.appendChild(results_player_score);\n\n        results_players.appendChild(results_player);\n      });\n\n      results_team_win_state.appendChild(results_team_score);\n      results_team.appendChild(results_team_win_state);\n      results_team.appendChild(results_players);\n\n      layer.appendChild(results_team);\n    })\n\n  },\n  clear_DOM: function() {\n    var myNode = this.getLayerNode();\n    while (myNode.children[1]) {\n      myNode.removeChild(myNode.children[1]);\n    }\n  },\n\n\n  // returns this format [{color: '#333233', score: 90, players: [['joan', 4, 5], ['billy', 4, 5]]}, [['acp', 1, 3], ['cake', 3, 4]]]\n  structure(game_data) {\n    var summary = [];\n    var [model, teams] = game_data;\n    teams.forEach((team)=>{\n      var color = team.color,\n          score = 100 - model.scores[team.number],\n          players = [];\n      team.players.forEach((player)=>{\n        players.push([player.name, player.score.kills, player.score.deaths]);\n      });\n      players.sort((a, b)=> b[1] - a[1]);\n      summary.push({color, score, players});\n    });\n    summary.sort((a, b)=> b.score - a.score );\n    return summary;\n  }\n\n\n};\n"]}