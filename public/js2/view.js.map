{"version":3,"sources":["../js/view.js"],"names":["types","lastTouchEnd","document","documentElement","addEventListener","event","now","Date","getTime","preventDefault","window","querySelector","TINT","assortment","colors","angle","angleOffset","shuffle","sample","c1","c2","deg","Math","randomIntMinMax","load","refresh","setAngleOffset","elem","$","css","DSGameLobby","props","state","lobbyOptionsShown","setState","data","lobbySummary","full","users","players","length","game_settings","noneditableSettings","maxPlayers","ongoing","type","code","password","lobbyOptionsToggle","editableSettings","joined","ready","React","Component","IconBar","homeAction","location","reset","IconButton","iconName","onClick","LobbyType","name","REF","lobby","toUpperCase","desc","typeDesc","LobbyActions","ENV","clearPassword","setPassword","prompt","href","passwordMessage","handleShareClick","handlePasswordClick","onOptionsClick","LobbyOptions","prefs","optionKey","choiceIndex","copy","Object","assign","updateOptions","options","keys","forEach","optionValue","push","handleOptionChange","show","ListSelect","selectedChoice","selectTitle","LOBBY_OPTIONS","choices","slice","optionChoices","choice","ListSelectOption","title","selected","className","PlayerConfig","shipCatalogue","catalogueIndex","ship","expanded","refreshShip","isLeft","prevShip","nextShip","start","playerConfigClass","shadeClass","handleClick","handleExpansionToggle","handleActionClick","ShipPicker","i","typeName","ShipDesc","imagePath","IMAGES","ShipStats","rows","stats","metric","value","ShipStatsRow","ShipSub","subName","sub","shipSub","ActionButton","buttonTitle","actionBlock","join","LobbyUsers","spectators","limit","playerLimit","PlayersTable","index","id","rank","team","highlight","user","sign","rankSymbol","User","calculateRankLetter","left","over","SpectatorsTable","INFO","map","mode","stock","player_capacity","results","modeMeasure"],"mappings":";;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIA,QAAQ,CAAC,QAAD,EAAW,OAAX,EAAoB,UAApB,EAAgC,MAAhC,EAAwC,SAAxC,CAAZ;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIC,eAAe,CAAnB;AACAC,SAASC,eAAT,CAAyBC,gBAAzB,CAA0C,UAA1C,EAAsD,UAAUC,KAAV,EAAiB;AACrE,MAAIC,MAAO,IAAIC,IAAJ,EAAD,CAAaC,OAAb,EAAV;AACA,MAAIF,MAAML,YAAN,IAAsB,GAA1B,EAA+B;AAC7BI,UAAMI,cAAN;AACD;AACDR,iBAAeK,GAAf;AACD,CAND,EAMG,KANH;;AAQAI,OAAON,gBAAP,CAAwB,MAAxB,EAAgC,YAAK;AACnCF,WAASS,aAAT,CAAuB,cAAvB,EAAuCP,gBAAvC,CAAwD,YAAxD,EAAsE,UAAUC,KAAV,EAAiB;AAAEA,UAAMI,cAAN;AAAwB,GAAjH,EAAmH,IAAnH;AACAP,WAASS,aAAT,CAAuB,cAAvB,EAAuCP,gBAAvC,CAAwD,UAAxD,EAAoE,UAAUC,KAAV,EAAiB;AAAEA,UAAMI,cAAN;AAAwB,GAA/G,EAAiH,KAAjH;AACD,CAHD;;AAOA,IAAIG,OAAO;AACTC,cAAY,CACV,CAAC,SAAD,EAAY,SAAZ,CADU,EAEV,CAAC,SAAD,EAAY,SAAZ,CAFU,EAGV,CAAC,SAAD,EAAY,SAAZ,CAHU,CADH;;AAOTC,UAAQ,CAAC,IAAD,EAAO,IAAP,CAPC;AAQTC,SAAO,CARE;;AAUTC,eAAa,CAVJ;;AAYTC,SAZS,qBAYC;AAAA,gCACOL,KAAKC,UAAL,CAAgBK,MAAhB,EADP;AAAA;AAAA,QACHC,EADG;AAAA,QACCC,EADD;AAAA,QACiCC,GADjC,GACuCC,KAAKC,eAAL,CAAqB,EAArB,EAAyB,EAAzB,CADvC;;AAERX,SAAKY,IAAL,CAAUH,GAAV,EAAeF,EAAf,EAAmBC,EAAnB;AACD,GAfQ;AAiBTI,MAjBS,gBAiBJH,GAjBI,EAiBCF,EAjBD,EAiBKC,EAjBL,EAiBS;AAChB,SAAKL,KAAL,GAAaM,GAAb;AACA,SAAKP,MAAL,CAAY,CAAZ,IAAiBK,EAAjB;AACA,SAAKL,MAAL,CAAY,CAAZ,IAAiBM,EAAjB;AACA,SAAKK,OAAL;AACD,GAtBQ;AAwBTC,gBAxBS,0BAwBML,GAxBN,EAwBW;AAClB,SAAKL,WAAL,GAAmBK,GAAnB;AACA,SAAKI,OAAL;AACD,GA3BQ;AA6BTA,SA7BS,qBA6BC;AACR,QAAIE,OAAOzB,SAASS,aAAT,CAAuB,OAAvB,CAAX;AACA,QAAIgB,IAAJ,EAAUC,EAAED,IAAF,EAAQE,GAAR,CAAY,YAAZ,wBAA6C,KAAKd,KAAL,GAAa,KAAKC,WAA/D,cAAkF,KAAKF,MAAL,CAAY,CAAZ,CAAlF,UAAqG,KAAKA,MAAL,CAAY,CAAZ,CAArG;AACX;AAhCQ,CAAX;;IAkDMgB,W;;;AACJ,uBAAYC,KAAZ,EAAmB;AAAA;;AAAA,0HACXA,KADW;;AAEjB,UAAKC,KAAL,GAAa;AACX;AACA;AACA;AACA;AACA;AACA;AACAC,yBAAmB;AAPR,KAAb;AAFiB;AAWlB;;;;yCAEoB;AACnB,WAAKC,QAAL,CAAc;AACZD,2BAAmB,CAAC,KAAKD,KAAL,CAAWC;AADnB,OAAd;AAGD;;;6BAEQ;AAAA;;AACP,UAAME,OAAO,KAAKJ,KAAL,CAAWK,YAAxB;AACA,UAAMC,OAAOF,KAAKG,KAAL,CAAWC,OAAX,CAAmBC,MAAnB,IAA6BL,KAAKM,aAAL,CAAmBC,mBAAnB,CAAuCC,UAAjF;AACA,UAAMC,UAAUT,KAAKS,OAArB;;AAEA,aACE;AAAA;AAAA,UAAK,IAAG,eAAR;AACE;AAAA;AAAA,YAAK,IAAG,QAAR;AACE,8BAAC,OAAD,OADF;AAEE;AAAA;AAAA,cAAM,IAAG,WAAT;AAAA;AAAA,WAFF;AAGE,8BAAC,SAAD,IAAW,MAAMT,KAAKU,IAAtB,GAHF;AAIE,8BAAC,YAAD,IAAc,MAAMV,KAAKW,IAAzB,EAA+B,UAAUX,KAAKY,QAA9C,EAAwD,gBAAgB;AAAA,qBAAM,OAAKC,kBAAL,EAAN;AAAA,aAAxE,GAJF;AAKE,8BAAC,YAAD,IAAc,OAAOb,KAAKM,aAAL,CAAmBQ,gBAAxC,EAA0D,MAAM,KAAKjB,KAAL,CAAWC,iBAA3E;AALF,SADF;AAQE;AAAA;AAAA,YAAK,IAAG,QAAR;AACE,8BAAC,YAAD,IAAc,QAAQ,KAAKF,KAAL,CAAWmB,MAAjC,EAAyC,OAAO,KAAKnB,KAAL,CAAWoB,KAA3D,EAAkE,MAAMd,IAAxE,EAA8E,SAASO,OAAvF,GADF;AAEE,8BAAC,UAAD,IAAY,OAAOT,KAAKG,KAAxB,EAA+B,aAAaH,KAAKM,aAAL,CAAmBC,mBAAnB,CAAuCC,UAAnF;AAFF;AARF,OADF;AAmBD;;;;EA5CuBS,MAAMC,S;;IAgD1BC,O;;;;;;;;;;;6BACK;;AAEP,UAAMC,aAAa,SAAbA,UAAa;AAAA,eAAM7C,OAAO8C,QAAP,CAAgBC,KAAhB,EAAN;AAAA,OAAnB;;AAEA,aACE;AAAA;AAAA,UAAK,IAAG,UAAR;AACE,4BAAC,UAAD,IAAY,UAAS,MAArB,EAA4B,SAAS;AAAA,mBAAMF,YAAN;AAAA,WAArC,GADF;AAEE,4BAAC,UAAD,IAAY,UAAS,WAArB,GAFF;AAGE,4BAAC,UAAD,IAAY,UAAS,MAArB,GAHF;AAIE,4BAAC,UAAD,IAAY,UAAS,UAArB;AAJF,OADF;AAQD;;;;EAbmBH,MAAMC,S;;IAgBtBK,U;;;;;;;;;;;6BAEK;AAAA;;AACP,aACE;AAAA;AAAA,UAAQ,WAAW,KAAK3B,KAAL,CAAW4B,QAAX,GAAsB,OAAzC,EAAkD,SAAS;AAAA,mBAAM,OAAK5B,KAAL,CAAW6B,OAAX,EAAN;AAAA,WAA3D;AAAuF;AAAA;AAAA,YAAG,WAAU,gBAAb;AAA+B,eAAK7B,KAAL,CAAW4B;AAA1C;AAAvF,OADF;AAGD;;;;EANsBP,MAAMC,S;;IASzBQ,S;;;;;;;;;;;6BACK;;AAEP,UAAMC,OAAO,CAACC,IAAIC,KAAJ,CAAUnB,IAAV,CAAe,KAAKd,KAAL,CAAWc,IAA1B,IAAkC,QAAnC,EAA6CoB,WAA7C,EAAb;AACA,UAAMC,OAAOH,IAAIC,KAAJ,CAAUG,QAAV,CAAmB,KAAKpC,KAAL,CAAWc,IAA9B,CAAb;;AAEA,aACE;AAAA;AAAA,UAAK,IAAG,YAAR;AACE;AAAA;AAAA,YAAM,IAAG,iBAAT;AAA4BiB;AAA5B,SADF;AAEE;AAAA;AAAA,YAAM,IAAG,iBAAT;AAA4BI;AAA5B;AAFF,OADF;AAOD;;;;EAbqBd,MAAMC,S;;IAgBxBe,Y;;;;;;;;;;;0CAEkB;;AAEpB,WAAKrC,KAAL,CAAWgB,QAAX,GAAsBsB,IAAIL,KAAJ,CAAUM,aAAV,EAAtB,GAAkDD,IAAIL,KAAJ,CAAUO,WAAV,EAAlD;AAED;;;uCAEkB;;AAEjB7D,aAAO8D,MAAP,6BAA0C9D,OAAO8C,QAAP,CAAgBiB,IAA1D;AAED;;;6BAEQ;AAAA;;AACP,UAAM3B,OAAO,KAAKf,KAAL,CAAWe,IAAxB;;AAEA,UAAM4B,kBAAkB,KAAK3C,KAAL,CAAWgB,QAAX,GAAsB,gBAAtB,GAAyC,cAAjE;;AAEA,aACE;AAAA;AAAA,UAAK,IAAG,cAAR;AACE;AAAA;AAAA,YAAM,IAAG,UAAT;AAAqBD,eAAKmB,WAAL;AAArB,SADF;AAEE;AAAA;AAAA,YAAK,IAAG,sBAAR;AAIE;AAAA;AAAA,cAAM,WAAU,cAAhB,EAA+B,SAAS;AAAA,uBAAM,OAAKU,gBAAL,EAAN;AAAA,eAAxC;AAAA;AAAA,WAJF;AAKE;AAAA;AAAA,cAAM,WAAU,cAAhB,EAA+B,SAAS;AAAA,uBAAM,OAAKC,mBAAL,EAAN;AAAA,eAAxC;AAA2EF;AAA3E,WALF;AAME;AAAA;AAAA,cAAM,IAAG,qBAAT,EAA+B,WAAU,cAAzC,EAAwD,SAAS;AAAA,uBAAM,OAAK3C,KAAL,CAAW8C,cAAX,EAAN;AAAA,eAAjE;AAAA;AAAA;AANF;AAFF,OADF;AAaD;;;;EAhCwBzB,MAAMC,S;;IAmC3ByB,Y;;;AAEJ,wBAAY/C,KAAZ,EAAmB;AAAA;;AAAA,6HACXA,KADW;;AAEjB,WAAKC,KAAL,GAAa;AACX+C,aAAOhD,MAAMgD;AADF,KAAb;AAFiB;AAKlB;;;;uCAEkBC,S,EAAWC,W,EAAa;;AAEzC,UAAMC,OAAOC,OAAOC,MAAP,CAAc,EAAd,EAAkB,KAAKpD,KAAL,CAAW+C,KAA7B,CAAb;AACAG,WAAKF,SAAL,IAAkBC,WAAlB;AACA,WAAK/C,QAAL,CAAc;AACZ6C,eAAOG;AADK,OAAd;;AAIA;AACAb,UAAIL,KAAJ,CAAUqB,aAAV,CAAwBL,SAAxB,EAAmCC,WAAnC;AAED;;;6BAEQ;AAAA;;AAEP,UAAIK,UAAU,EAAd;;AAEA;AACAH,aAAOI,IAAP,CAAY,KAAKvD,KAAL,CAAW+C,KAAvB,EAA8BS,OAA9B,CAAsC,qBAAa;AACjD,YAAMC,cAAc,QAAKzD,KAAL,CAAW+C,KAAX,CAAiBC,SAAjB,CAApB;AACAM,gBAAQI,IAAR,CACE,oBAAC,UAAD,IAAY,KAAKV,SAAjB,EAA4B,WAAWA,SAAvC,EAAkD,aAAaS,WAA/D,EAA4E,SAAS,iBAACT,SAAD,EAAYC,WAAZ;AAAA,mBAA4B,QAAKU,kBAAL,CAAwBX,SAAxB,EAAmCC,WAAnC,CAA5B;AAAA,WAArF,GADF;AAGD,OALD;;AAOA,aACE;AAAA;AAAA,UAAK,IAAG,eAAR,EAAwB,WAAW,KAAKlD,KAAL,CAAW6D,IAAX,GAAkB,EAAlB,GAAuB,QAA1D;AACGN;AADH,OADF;AAMD;;;;EAxCwBlC,MAAMC,S;;IA2C3BwC,U;;;;;;;;;;;6BACK;AAAA;;AAEP,UAAMb,YAAY,KAAKjD,KAAL,CAAWiD,SAA7B;AACA,UAAMc,iBAAiB,KAAK/D,KAAL,CAAW0D,WAAlC;;AAEA,UAAMM,cAAcC,cAAchB,SAAd,EAAyB,CAAzB,CAApB;AACA,UAAMiB,UAAUD,cAAchB,SAAd,EAAyBkB,KAAzB,CAA+B,CAA/B,CAAhB;;AAEA,UAAIC,gBAAgB,EAApB;AACAF,cAAQT,OAAR,CAAgB,UAACY,MAAD,EAASnB,WAAT,EAAuB;AACrCkB,sBAAcT,IAAd,CACE,oBAAC,gBAAD;AACE,eAAKU,MADP;AAEE,iBAAOA,MAFT;AAGE,oBAAUnB,gBAAca,cAH1B;AAIE,mBAAS;AAAA,mBAAM,QAAK/D,KAAL,CAAW6B,OAAX,CAAmBoB,SAAnB,EAA8BC,WAA9B,CAAN;AAAA,WAJX,GADF;AAOD,OARD;;AAUA,aACE;AAAA;AAAA,UAAK,WAAU,aAAf;AACE;AAAA;AAAA,YAAM,WAAU,mBAAhB;AAAqCc;AAArC,SADF;AAEE;AAAA;AAAA,YAAK,WAAU,qBAAf;AAAsCI;AAAtC;AAFF,OADF;AAQD;;;;EA5BsB/C,MAAMC,S;;IA+BzBgD,gB;;;;;;;;;;;6BACK;AAAA;;AACP,UAAMC,QAAQ,KAAKvE,KAAL,CAAWuE,KAAzB;AACA,UAAMC,WAAW,KAAKxE,KAAL,CAAWwE,QAA5B;AACA,UAAMC,YAAYD,WAAW,QAAX,GAAsB,EAAxC;;AAEA,aACE;AAAA;AAAA,UAAM,WAAWC,SAAjB,EAA4B,SAAS;AAAA,mBAAM,QAAKzE,KAAL,CAAW6B,OAAX,EAAN;AAAA,WAArC;AAAkE0C;AAAlE,OADF;AAID;;;;EAV4BlD,MAAMC,S;;IAc/BoD,Y;;;AACJ,wBAAY1E,KAAZ,EAAmB;AAAA;;AAAA,8HACXA,KADW;;AAGjB,YAAK2E,aAAL,GAAqB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,CAArB;AACA,YAAKC,cAAL,GAAsB,CAAtB;;AAEA,YAAK3E,KAAL,GAAa;AACX4E,YAAM,QAAKF,aAAL,CAAmB,QAAKC,cAAxB,CADK;AAEX;AACAE,gBAAU;AAHC,KAAb;;AANiB;AAYlB;;;;kCAEa;AACZ,WAAK3E,QAAL,CAAc;AACZ0E,cAAM,KAAKF,aAAL,CAAmB,KAAKC,cAAxB;AADM,OAAd;AAGD;;;+BAEU;AACT,WAAKA,cAAL;AACA,UAAG,KAAKA,cAAL,GAAsB,KAAKD,aAAL,CAAmBlE,MAAnB,GAA0B,CAAnD,EAAsD,KAAKmE,cAAL,GAAsB,CAAtB;AACtD,WAAKG,WAAL;AACD;;;+BAEU;AACT,WAAKH,cAAL;AACA,UAAG,KAAKA,cAAL,GAAsB,CAAzB,EAA4B,KAAKA,cAAL,GAAsB,KAAKD,aAAL,CAAmBlE,MAAnB,GAA0B,CAAhD;AAC5B,WAAKsE,WAAL;AACD;;;gCAEWC,M,EAAQ;AAClB,UAAG,KAAKhF,KAAL,CAAWoB,KAAd,EAAqB;AACrB4D,eAAS,KAAKC,QAAL,EAAT,GAA2B,KAAKC,QAAL,EAA3B;AACD;;;4CAEuB;AACtB,WAAK/E,QAAL,CAAc;AACZ2E,kBAAU,CAAC,KAAK7E,KAAL,CAAW6E;AADV,OAAd;AAGD;;;wCAEmB;AAClBxC,UAAIL,KAAJ,CAAUkD,KAAV,CAAgB,KAAKlF,KAAL,CAAW4E,IAA3B;AACD;;;6BAEQ;AAAA;;AACP,UAAIO,oBAAsB,KAAKpF,KAAL,CAAWmB,MAAX,GAAsB,KAAKnB,KAAL,CAAWoB,KAAX,GAAmB,UAAnB,GAAgC,EAAtD,GAA6D,QAAvF;AACA,UAAIiE,aAAe,KAAKrF,KAAL,CAAWmB,MAAX,GAAsB,KAAKnB,KAAL,CAAWoB,KAAX,GAAmB,WAAnB,GAAiC,WAAvD,GAAuE,YAA1F;;AAEA,aACE;AAAA;AAAA,UAAK,IAAG,eAAR,EAAwB,WAAWgE,iBAAnC;AACE,qCAAK,IAAG,qBAAR,EAA8B,WAAWC,UAAzC,GADF;AAEE,4BAAC,UAAD,IAAY,MAAM,KAAKpF,KAAL,CAAW4E,IAA7B,EAAmC,SAAS,iBAACG,MAAD;AAAA,mBAAY,QAAKM,WAAL,CAAiBN,MAAjB,CAAZ;AAAA,WAA5C,GAFF;AAGE,4BAAC,QAAD,IAAU,MAAM,KAAK/E,KAAL,CAAW4E,IAA3B,GAHF;AAIE,4BAAC,SAAD,IAAW,MAAM,KAAK5E,KAAL,CAAW4E,IAA5B,EAAkC,UAAU,KAAK5E,KAAL,CAAW6E,QAAvD,GAJF;AAKE,4BAAC,OAAD,IAAS,MAAM,KAAK7E,KAAL,CAAW4E,IAA1B,EAAgC,UAAU,KAAK5E,KAAL,CAAW6E,QAArD,GALF;AAME;AAAA;AAAA,YAAK,IAAG,oBAAR;AAEE;AAAA;AAAA,cAAK,IAAG,wBAAR;AACE;AAAA;AAAA,gBAAM,SAAS;AAAA,yBAAM,QAAKS,qBAAL,EAAN;AAAA,iBAAf;AAAoD,mBAAKtF,KAAL,CAAW6E,QAAX,GAAsB,MAAtB,GAA+B;AAAnF,aADF;AAEE,gCAAC,YAAD;AACE,sBAAQ,KAAK9E,KAAL,CAAWmB,MADrB;AAEE,qBAAO,KAAKnB,KAAL,CAAWoB,KAFpB;AAGE,oBAAM,KAAKpB,KAAL,CAAWM,IAHnB;AAIE,uBAAS,KAAKN,KAAL,CAAWa,OAJtB;AAKE,uBAAS;AAAA,uBAAM,QAAK2E,iBAAL,EAAN;AAAA,eALX;AAFF;AAFF;AANF,OADF;AAqBD;;;;EAzEwBnE,MAAMC,S;;IA6E3BmE,U;;;;;;;;;;;6BAGK;AAAA;;AACP,UAAMC,IAAI,KAAK1F,KAAL,CAAW6E,IAArB;AACA,UAAMc,WAAW3D,IAAI6C,IAAJ,CAAS/D,IAAT,CAAc4E,CAAd,CAAjB;;AAEA,aACE;AAAA;AAAA,UAAK,IAAG,aAAR;AACE;AAAA;AAAA;AACE,gBAAG,kBADL;AAEE,uBAAU,mBAFZ;AAGE,qBAAS;AAAA,qBAAM,QAAK1F,KAAL,CAAW6B,OAAX,CAAmB,IAAnB,CAAN;AAAA,aAHX;AAAA;AAAA,SADF;AAKE;AAAA;AAAA,YAAM,IAAG,kBAAT;AACM,qBAAS;AAAA,qBAAM,QAAK7B,KAAL,CAAW6B,OAAX,CAAmB,KAAnB,CAAN;AAAA,aADf;AACiD8D,mBAASzD,WAAT;AADjD,SALF;AAOE;AAAA;AAAA;AACE,gBAAG,mBADL;AAEE,uBAAU,mBAFZ;AAGE,qBAAS;AAAA,qBAAM,QAAKlC,KAAL,CAAW6B,OAAX,CAAmB,KAAnB,CAAN;AAAA,aAHX;AAAA;AAAA;AAPF,OADF;AAcD;;;;EArBsBR,MAAMC,S;;IAwBzBsE,Q;;;;;;;;;;;6BAEK;AACP,UAAMF,IAAI,KAAK1F,KAAL,CAAW6E,IAArB;AACA,UAAMc,WAAW3D,IAAI6C,IAAJ,CAAS/D,IAAT,CAAc4E,CAAd,CAAjB;AACA,UAAMG,YAAYC,OAAOjB,IAAP,CAAYa,CAAZ,CAAlB;AACA,UAAMtD,WAAWJ,IAAI6C,IAAJ,CAASzC,QAAT,CAAkBsD,CAAlB,CAAjB;;AAEA,aACE;AAAA;AAAA,UAAK,IAAG,WAAR;AACE;AAAA;AAAA,YAAK,IAAG,iBAAR;AACE,uCAAK,IAAG,4BAAR,GADF;AAEE,uCAAK,KAAKG,SAAV,EAAqB,KAAKF,WAAW,aAArC,EAAoD,IAAG,sBAAvD,EAA8E,WAAU,OAAxF;AAFF,SADF;AAKE;AAAA;AAAA,YAAM,IAAG,gBAAT;AAA2BvD;AAA3B;AALF,OADF;AASD;;;;EAjBoBf,MAAMC,S;;IAoBvByE,S;;;;;;;;;;;6BAEK;;AAEP,UAAMtB,YAAY,KAAKzE,KAAL,CAAW8E,QAAX,GAAsB,EAAtB,GAA2B,WAA7C;;AAEA,UAAIkB,OAAO,EAAX;AAJO;AAAA;AAAA;;AAAA;AAKP,6BAAkBhE,IAAI6C,IAAJ,CAASoB,KAA3B,8HAAkC;AAAA,cAA1BC,MAA0B;;AAChC,cAAM3B,QAAQ2B,OAAO,CAAP,CAAd;AACA,cAAMC,QAAQD,OAAO/B,KAAP,CAAa,CAAb,EAAgB,KAAKnE,KAAL,CAAW6E,IAA3B,CAAd;AACAmB,eAAKrC,IAAL,CAAU,oBAAC,YAAD,IAAc,KAAKY,KAAnB,EAA0B,OAAOA,KAAjC,EAAwC,OAAO4B,KAA/C,GAAV;AACD;AATM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAWP,aACE;AAAA;AAAA,UAAK,IAAG,YAAR,EAAqB,WAAW1B,SAAhC;AACGuB;AADH,OADF;AAKD;;;;EAlBqB3E,MAAMC,S;;IAqBxB8E,Y;;;;;;;;;;;6BAEK;AACP,aACE;AAAA;AAAA,UAAK,WAAU,gBAAf;AACE;AAAA;AAAA,YAAM,WAAU,sBAAhB;AAAwC,eAAKpG,KAAL,CAAWuE;AAAnD,SADF;AAEE;AAAA;AAAA,YAAM,WAAU,gBAAhB;AACE,wCAAM,WAAW,0BAA0B,KAAKvE,KAAL,CAAWmG,KAAX,GAAiB,EAA5D;AADF;AAFF,OADF;AAQD;;;;EAXwB9E,MAAMC,S;;IAe3B+E,O;;;;;;;;;;;6BACK;;AAEP,UAAM5B,YAAY,KAAKzE,KAAL,CAAW8E,QAAX,GAAsB,EAAtB,GAA2B,WAA7C;;AAEA,UAAMY,IAAI,KAAK1F,KAAL,CAAW6E,IAArB;AACA,UAAMyB,UAAUtE,IAAI6C,IAAJ,CAAS0B,GAAT,CAAab,CAAb,CAAhB;AACA,UAAMG,YAAYC,OAAOU,OAAP,CAAed,CAAf,CAAlB;;AAEA,aACE;AAAA;AAAA,UAAK,IAAG,UAAR,EAAmB,WAAWjB,SAA9B;AACE;AAAA;AAAA,YAAM,IAAG,gBAAT;AAAA;AAAA,SADF;AAEE;AAAA;AAAA,YAAK,IAAG,gBAAR;AACE,uCAAK,IAAG,2BAAR,GADF;AAEE,uCAAK,KAAKoB,SAAV,EAAqB,KAAKS,UAAU,iBAApC,EAAuD,IAAG,qBAA1D,EAAgF,WAAU,OAA1F;AAFF,SAFF;AAME;AAAA;AAAA,YAAM,IAAG,gBAAT;AAA2BA;AAA3B;AANF,OADF;AAUD;;;;EAnBmBjF,MAAMC,S;;IAsBtBmF,Y;;;;;;;;;;;6BAEK;AAAA;;AAEP,UAAIC,oBAAJ;AACA,UAAIjC,YAAY,EAAhB;AACA,UAAIkC,cAAc,uBAAM,CAAE,CAA1B;AACA,UAAG,KAAK3G,KAAL,CAAWmB,MAAd,EAAsB;AACpB,YAAG,KAAKnB,KAAL,CAAWoB,KAAd,EAAqB;AACnBsF,wBAAc,YAAd;AACAjC,sBAAY,UAAZ;AACD,SAHD,MAGO;AACLiC,wBAAc,OAAd;AACAC,wBAAc,uBAAM;AAAE,oBAAK3G,KAAL,CAAW6B,OAAX;AAAuB,WAA7C;AACD;AACF,OARD,MAQO;AACL,YAAG,KAAK7B,KAAL,CAAWa,OAAd,EAAuB;AACrB6F,wBAAc,aAAd;AACAjC,sBAAY,QAAZ;AACD,SAHD,MAGO;AACL,cAAG,KAAKzE,KAAL,CAAWM,IAAd,EAAoB;AAClBoG,0BAAc,YAAd;AACAjC,wBAAY,QAAZ;AACD,WAHD,MAGO;AACLiC,0BAAc,SAAd;AACAC,0BAAc,uBAAM;AAAErE,kBAAIL,KAAJ,CAAU2E,IAAV;AAAkB,aAAxC;AACD;AACF;AACF;;AAED;AACA;AACA,aACE;AAAA;AAAA,UAAQ,WAAWnC,SAAnB,EAA8B,SAAS;AAAA,mBAAMkC,aAAN;AAAA,WAAvC;AAA6DD;AAA7D,OADF;AAGD;;;;EAnCwBrF,MAAMC,S;;IAuC3BuF,U;;;;;;;;;;;6BAEK;AACP,UAAMrG,UAAU,KAAKR,KAAL,CAAWO,KAAX,CAAiBC,OAAjC;AACA,UAAMsG,aAAa,KAAK9G,KAAL,CAAWO,KAAX,CAAiBuG,UAApC;AACA,UAAMC,QAAQ,KAAK/G,KAAL,CAAWgH,WAAzB;;AAEA,aACE;AAAA;AAAA,UAAK,IAAG,aAAR;AACE,4BAAC,YAAD,IAAc,OAAOxG,OAArB,EAA8B,OAAOuG,KAArC,GADF;AAEE,4BAAC,eAAD,IAAiB,OAAOD,UAAxB;AAFF,OADF;AAMD;;;;EAbsBzF,MAAMC,S;;IAgBzB2F,Y;;;;;;;;;;;6BAEK;;AAEP,UAAIjB,OAAO,EAAX;AACA,UAAIkB,QAAQ,CAAZ;AAHO;AAAA;AAAA;;AAAA;AAIP,8BAAyC,KAAKlH,KAAL,CAAWO,KAApD,mIAA2D;AAAA;;AAAA;;AAAA,cAAlD4G,EAAkD;AAAA,cAA9CpF,IAA8C;AAAA,cAAxCqF,IAAwC;AAAA,cAAlCC,IAAkC;AAAA,cAA5BjG,KAA4B;;;AAEzD,cAAIkG,YAAYhF,IAAIiF,IAAJ,CAASJ,EAAT,KAAgBA,EAAhB,GAAqB,WAArB,GAAmC,EAAnD;AACA/F,kBAAQA,QAAQ,GAAR,GAAc,EAAtB;AACA,cAAIoG,OAAQJ,OAAO,GAAP,IAAc,EAAd,GAAmB,GAAnB,GAA0BA,OAAO,GAAP,IAAc,EAAd,GAAmB,GAAnB,GAAyB,EAA/D;AACA,cAAIK,mBAAgBC,KAAKC,mBAAL,CAAyBP,IAAzB,IAAiCI,IAAjD,CAAJ;AACAH,iBAAOA,QAAQ,MAAf;AACArB,eAAKrC,IAAL,CACE;AAAA;AAAA,cAAI,KAAK5B,OAAKqF,IAAd,EAAoB,WAAWE,SAA/B;AACE;AAAA;AAAA;AAAK,gBAAEJ,KAAF,GAAU;AAAf,aADF;AAEE;AAAA;AAAA;AAAK9F;AAAL,aAFF;AAGE;AAAA;AAAA;AAAKW;AAAL,aAHF;AAIE;AAAA;AAAA;AAAK0F;AAAL,aAJF;AAKE;AAAA;AAAA;AAAKJ;AAAL;AALF,WADF;AASD;AApBM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAqBP,UAAIO,OAAO,KAAK5H,KAAL,CAAW+G,KAAX,GAAmB,KAAK/G,KAAL,CAAWO,KAAX,CAAiBE,MAA/C;AACA,UAAMoH,OAAOD,OAAO,CAApB;AACA,UAAGC,IAAH,EAASD,OAAO,CAAP;AACT,WAAI,IAAIlC,IAAI,CAAZ,EAAeA,IAAIkC,IAAnB,EAAyBlC,GAAzB,EAA8B;AAC5BM,aAAKrC,IAAL,CACE;AAAA;AAAA,YAAI,KAAK,EAAEuD,KAAX,EAAkB,WAAU,WAA5B;AACE,yCADF;AAEE,yCAFF;AAGE;AAAA;AAAA;AAAK;AAAL,WAHF;AAIE,yCAJF;AAKE;AALF,SADF;AASD;AACD,UAAGW,IAAH,EAAS;AACP7B,aAAKrC,IAAL,CACE;AAAA;AAAA,YAAI,KAAK,EAAEuD,KAAX,EAAkB,WAAU,WAA5B;AACE,yCADF;AAEE,yCAFF;AAGE;AAAA;AAAA;AAAK;AAAL,WAHF;AAIE,yCAJF;AAKE;AALF,SADF;AASD;;AAED,aACE;AAAA;AAAA,UAAO,IAAG,eAAV,EAA0B,WAAU,aAApC;AACE;AAAA;AAAA;AACE;AAAA;AAAA;AACE,2CADF;AAEE,2CAFF;AAGE;AAAA;AAAA;AAAA;AAAA,aAHF;AAIE;AAAA;AAAA;AAAA;AAAA,aAJF;AAKE;AAAA;AAAA;AAAA;AAAA;AALF;AADF,SADF;AAUE;AAAA;AAAA;AACGlB;AADH;AAVF,OADF;AAgBD;;;;EAjEwB3E,MAAMC,S;;IAoE3BwG,e;;;;;;;;;;;6BAEK;;AAEP,UAAI9B,OAAO,EAAX;AACA,UAAIkB,QAAQ,CAAZ;AAHO;AAAA;AAAA;;AAAA;AAIP,8BAAgB,KAAKlH,KAAL,CAAWO,KAA3B,mIAAkC;AAAA,cAA1BwB,IAA0B;;AAChCmF;AACAlB,eAAKrC,IAAL,CACE;AAAA;AAAA,cAAI,KAAK5B,OAAKmF,KAAd;AACE;AAAA;AAAA;AAAKnF;AAAL;AADF,WADF;AAKD;AAXM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAaP,aACE;AAAA;AAAA,UAAO,IAAG,kBAAV,EAA6B,WAAU,aAAvC;AACE;AAAA;AAAA;AACA;AAAA;AAAA;AACE;AAAA;AAAA;AAAA;AAAiBmF,mBAAjB;AAAA;AAAA;AADF;AADA,SADF;AAME;AAAA;AAAA;AACClB;AADD;AANF,OADF;AAYD;;;;EA3B2B3E,MAAMC,S;;AA+BpC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIyG,OAAO;AACTjH,QAAM,CADG;AAETC,QAAM,QAFG;AAGTC,YAAU,IAHD;AAITN,iBAAe;AACbsH,SAAK,CADQ;AAEbC,UAAM,CAFO;AAGbC,WAAO,CAHM;AAIbC,qBAAiB;AAJJ,GAJN;AAUT5H,SAAO;AACLC,aAAS;AACP;;AAEA,KAAC,OAAD,EAAU,GAAV,EAAe,CAAf,EAAkB,IAAlB,EAAwB,CAAxB,CAHO,EAIP,CAAC,cAAD,EAAiB,GAAjB,EAAsB,CAAtB,EAAyB,KAAzB,EAAgC,CAAhC,CAJO,EAKP,CAAC,UAAD,EAAa,GAAb,EAAkB,CAAlB,EAAqB,IAArB,EAA2B,CAA3B,CALO,CADJ;AASLsG,gBAAY,CACV,SADU,EAEV,UAFU;AATP;AAVE,CAAX;;AA0BA,IAAM7C,gBAAgB;AACpB+D,OAAK,CAAC,KAAD,EAAQ,UAAR,EAAoB,UAApB,CADe;AAEpBC,QAAM,CAAC,WAAD,EAAc,kBAAd,EAAkC,aAAlC,CAFc,EAEmC;AACvDE,mBAAiB,CAAC,aAAD,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,CAHG;AAIpBD,SAAO,CAAC,OAAD,EAAU,GAAV,EAAe,GAAf,EAAoB,GAApB,EAAyB,GAAzB,EAA8B,GAA9B,EAAmC,GAAnC,EAAwC,GAAxC,EAA6C,GAA7C,EAAkD,GAAlD,EAAuD,IAAvD;AAJa,CAAtB;;AAOA,IAAMlG,MAAM;AACVC,SAAO;AACLnB,UAAM,CAAC,QAAD,EAAW,SAAX,EAAsB,UAAtB,CADD;AAELsB,cAAU,CACR,kFADQ,EAER,mFAFQ,EAGR,oFAHQ;AAFL,GADG;;AAUVyC,QAAM;AACJ/D,UAAM,CAAC,UAAD,EAAa,MAAb,EAAqB,OAArB,EAA8B,SAA9B,EAAyC,QAAzC,CADF;AAEJsB,cAAU,CACR,6DADQ,EAER,kEAFQ,EAGR,uDAHQ,EAIR,iDAJQ,EAKR,8DALQ,CAFN;AASJmE,SAAK,CAAC,WAAD,EAAc,aAAd,EAA6B,WAA7B,EAA0C,SAA1C,EAAqD,YAArD,CATD;AAUJN,WAAO,CACL,CAAC,QAAD,EAAY,KAAZ,EAAmB,KAAnB,EAA0B,KAA1B,EAAiC,KAAjC,EAAwC,KAAxC,CADK,EAEL,CAAC,OAAD,EAAY,KAAZ,EAAmB,KAAnB,EAA0B,KAA1B,EAAiC,KAAjC,EAAwC,KAAxC,CAFK,EAGL,CAAC,QAAD,EAAY,KAAZ,EAAmB,KAAnB,EAA0B,KAA1B,EAAiC,KAAjC,EAAwC,KAAxC,CAHK,EAIL,CAAC,OAAD,EAAY,KAAZ,EAAmB,KAAnB,EAA0B,KAA1B,EAAiC,KAAjC,EAAwC,KAAxC,CAJK;;AAVH,GAVI;;AA6BVmC,WAAS;AACPC,iBAAa,CAAC,UAAD,EAAa,gBAAb,EAA+B,aAA/B;AADN;;AA7BC,CAAZ;;AAmCA,IAAMvC,SAAS;AACbjB,QAAM,CACJ,+BADI,EAEJ,2BAFI,EAGJ,4BAHI,EAIJ,8BAJI,EAKJ,6BALI,CADO;AAQb2B,WAAS,CACP,mCADO,EAEP,+BAFO,EAGP,gCAHO,EAIP,kCAJO,EAKP,iCALO;AARI,CAAf;;AAiBA;AACA;AACA;AACA","file":"view.js","sourcesContent":["\n// function refreshLobbyView() {\n//\n//   // clear it up\n//   $('span.mi').remove();\n//\n//   // populate\n//   let players = ENV[\"lobby\"][\"players\"];\n//   players.forEach((id, player) => {\n//\n//     let name = player.name;\n//     if(id == ENV.storage.id) {\n//       let span = document.createElement('span'); span.className = 'mi';\n//       let input = document.createElement('input'); input.id = \"name-input\";\n//       input.type = \"text\";\n//       input.placeholder = \"your name\";\n//       input.value = name;\n//       input.onkeydown = function(e) { if(e.keyCode==13) $(this).blur() };\n//       input.oninput = function() { ENV.sound.play('type') };\n//       input.onfocus = function() { editing = true };\n//       input.onblur = function() { socket.emit('set name', this.value.substr(0, 24)); editing = false; refreshLobbyView() };\n//       let row = document.createElement('span'); row.className = 'mi-row';\n//       let select = document.createElement('select');\n//       // let defoption = document.createElement('option'); defoption.disabled = true; defoption.textContent = \"choose ship type\";\n//       // select.appendChild(defoption);\n//       // let random_option = document.createElement('option'); random_option.textContent = \"random\"; random_option.value = types.sample();\n//       // select.appendChild(random_option);\n//       types.forEach(t => {\n//         let option = document.createElement('option');\n//         option.innerHTML = t;\n//         select.appendChild(option);\n//       });\n//       select.value = ENV.storage.type || 'standard';//defoption.textContent;\n//       select.onchange = function(e) { socket.emit('set type', this.value); ENV.storage.type = this.value; };\n//       let team = document.createElement('select');\n//       let no_team = document.createElement('option');\n//       no_team.innerHTML = '-';\n//       no_team.value = -1;\n//       team.appendChild(no_team);\n//       ENV.lobby.team_capacity.times(i => {\n//         let option = document.createElement('option');\n//         option.innerHTML = i+1;\n//         option.value = i;\n//         team.appendChild(option);\n//       });\n//       team.value = ENV.storage.team || -1;\n//       team.onchange = function(e) { socket.emit('set team', this.value); ENV.storage.team = this.value; };\n//       // let right = document.createElement('span');\n//       let checkbox = document.createElement('input'); checkbox.type = \"checkbox\"; checkbox.name = \"checkbox\";\n//       checkbox.onchange = function() { if(this.checked) { socket.emit('ready'); ENV.sound.play('ready') } };\n//\n//       row.appendChild(document.createTextNode(\"type:\"));\n//       row.appendChild(select);\n//       if(ENV.lobby.type == 'private') row.appendChild(document.createTextNode(\"team:\"));\n//       if(ENV.lobby.type == 'private') row.appendChild(team);\n//       if(player.cleared) row.appendChild(document.createTextNode(\"ready?\"));\n//       if(player.cleared) row.appendChild(checkbox); //row.appendChild(checkboxlabel);\n//\n//       span.appendChild(input);\n//       span.appendChild(row);\n//\n//       $('.lobby > main').append(span);\n//       if(player.ready) { input.disabled = true; select.disabled = true; checkbox.checked = true; checkbox.disabled = true; }\n//     } else {\n//       let span = document.createElement('span'); span.className = 'mi player'; span.textContent = name || 'connected..'; span.title = name;\n//       $('.lobby > main').append(span);\n//     }\n//   });\n//\n//   let emptySlots =  ENV[\"lobby\"][\"capacity\"] - Object.keys(players).length;\n//   emptySlots.times(()=>{\n//     let span = document.createElement('span'); span.className = 'mi vacant'; span.textContent = 'waiting for players...';\n//     $('.lobby > main').append(span);\n//   });\n//\n// }\n\n\nlet types = ['damage', 'speed', 'standard', 'rate', 'defense'];\n\n\n// scroll view\n// let resetScrollView = () => {\n// var scroll_view = document.querySelector('#touch_layer .scroll');\n// scroll_view.scrollTop = scroll_view.scrollHeight/2;\n// };\n// $(()=>resetScrollView());\n\nvar lastTouchEnd = 0;\ndocument.documentElement.addEventListener('touchend', function (event) {\n  var now = (new Date()).getTime();\n  if (now - lastTouchEnd <= 300) {\n    event.preventDefault();\n  }\n  lastTouchEnd = now;\n}, false);\n\nwindow.addEventListener('load', ()=> {\n  document.querySelector('#touch_layer').addEventListener('touchstart', function (event) { event.preventDefault() }, true);\n  document.querySelector('#touch_layer').addEventListener('touchend', function (event) { event.preventDefault() }, false);\n});\n\n\n\nvar TINT = {\n  assortment: [\n    ['#0000ff', '#ff0000'],\n    ['#0000ff', '#aedc39'],\n    ['#0048ff', '#cc00ff']\n  ],\n\n  colors: [null, null],\n  angle: 0,\n\n  angleOffset: 0,\n\n  shuffle() {\n    let [c1, c2] = TINT.assortment.sample(), deg = Math.randomIntMinMax(15, 75);\n    TINT.load(deg, c1, c2);\n  },\n\n  load(deg, c1, c2) {\n    this.angle = deg;\n    this.colors[0] = c1;\n    this.colors[1] = c2;\n    this.refresh()\n  },\n\n  setAngleOffset(deg) {\n    this.angleOffset = deg;\n    this.refresh()\n  },\n\n  refresh() {\n    let elem = document.querySelector('#tint');\n    if (elem) $(elem).css('background', `linear-gradient(${this.angle + this.angleOffset}deg, ${this.colors[0]}, ${this.colors[1]})`);\n  }\n\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass DSGameLobby extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // state.userEngagementPhase\n      //   values: 0 - available to join\n      //           1 - joined\n      //           2 - locked in\n      //           3 - not available to join\n      // userEngagementPhase:  0,\n      lobbyOptionsShown: false,\n    }\n  }\n\n  lobbyOptionsToggle() {\n    this.setState({\n      lobbyOptionsShown: !this.state.lobbyOptionsShown\n    })\n  }\n\n  render() {\n    const data = this.props.lobbySummary;\n    const full = data.users.players.length >= data.game_settings.noneditableSettings.maxPlayers;\n    const ongoing = data.ongoing;\n\n    return (\n      <div id=\"ds-game-lobby\">\n        <div id=\"part-1\">\n          <IconBar />\n          <span id=\"logo-type\">DEEP SPACE</span>\n          <LobbyType type={data.type} />\n          <LobbyActions code={data.code} password={data.password} onOptionsClick={() => this.lobbyOptionsToggle()}/>\n          <LobbyOptions prefs={data.game_settings.editableSettings} show={this.state.lobbyOptionsShown} />\n        </div>\n        <div id=\"part-2\">\n          <PlayerConfig joined={this.props.joined} ready={this.props.ready} full={full} ongoing={ongoing} />\n          <LobbyUsers users={data.users} playerLimit={data.game_settings.noneditableSettings.maxPlayers}/>\n          {/*<div id=\"lobby-users\">*/}\n            {/*<PlayersTable />*/}\n            {/*<SpectatorsTable />*/}\n          {/*</div>*/}\n        </div>\n      </div>\n    );\n  }\n}\n\n\nclass IconBar extends React.Component {\n  render() {\n    \n    const homeAction = () => window.location.reset();\n    \n    return (\n      <div id=\"icon-bar\">\n        <IconButton iconName=\"home\" onClick={() => homeAction()}/>\n        <IconButton iconName=\"volume_up\" />\n        <IconButton iconName=\"help\" />\n        <IconButton iconName=\"settings\" />\n      </div>\n    );\n  }\n}\n\nclass IconButton extends React.Component {\n\n  render() {\n    return (\n      <button className={this.props.iconName + '_icon'} onClick={() => this.props.onClick()}><i className=\"material-icons\">{this.props.iconName}</i></button>\n    );\n  }\n}\n\nclass LobbyType extends React.Component {\n  render() {\n\n    const name = (REF.lobby.type[this.props.type] + ' lobby').toUpperCase();\n    const desc = REF.lobby.typeDesc[this.props.type];\n\n    return (\n      <div id=\"lobby-type\">\n        <span id=\"lobby-type-name\">{name}</span>\n        <span id=\"lobby-type-desc\">{desc}</span>\n      </div>\n    );\n\n  }\n}\n\nclass LobbyActions extends React.Component {\n\n  handlePasswordClick() {\n\n    this.props.password ? ENV.lobby.clearPassword() : ENV.lobby.setPassword()\n\n  }\n  \n  handleShareClick() {\n\n    window.prompt(`copy to share this link:`, window.location.href)\n\n  }\n\n  render() {\n    const code = this.props.code;\n    \n    const passwordMessage = this.props.password ? 'clear password' : 'add password';\n\n    return (\n      <div id=\"lobby-action\">\n        <span id=\"lobby-id\">{code.toUpperCase()}</span>\n        <div id=\"lobby-action-buttons\">\n          {/*<Button title=\"share\" />*/}\n          {/*<Button title=\"password\" />*/}\n          {/*<Button title=\"options\" />*/}\n          <span className=\"lobby-button\" onClick={() => this.handleShareClick()}>share</span>\n          <span className=\"lobby-button\" onClick={() => this.handlePasswordClick()}>{passwordMessage}</span>\n          <span id=\"lobby-button-option\" className=\"lobby-button\" onClick={() => this.props.onOptionsClick()}>options</span>\n        </div>\n      </div>\n    );\n  }\n}\n\nclass LobbyOptions extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      prefs: props.prefs\n    }\n  }\n\n  handleOptionChange(optionKey, choiceIndex) {\n\n    const copy = Object.assign({}, this.state.prefs);\n    copy[optionKey] = choiceIndex;\n    this.setState({\n      prefs: copy,\n    })\n\n    // tell server\n    ENV.lobby.updateOptions(optionKey, choiceIndex);\n\n  }\n\n  render() {\n\n    let options = [];\n\n    // iterating over object\n    Object.keys(this.state.prefs).forEach(optionKey => {\n      const optionValue = this.state.prefs[optionKey];\n      options.push(\n        <ListSelect key={optionKey} optionKey={optionKey} optionValue={optionValue} onClick={(optionKey, choiceIndex) => this.handleOptionChange(optionKey, choiceIndex)} />\n      );\n    });\n\n    return (\n      <div id=\"lobby-options\" className={this.props.show ? '' : 'hidden'}>\n        {options}\n      </div>\n    );\n\n  }\n}\n\nclass ListSelect extends React.Component {\n  render() {\n\n    const optionKey = this.props.optionKey;\n    const selectedChoice = this.props.optionValue;\n\n    const selectTitle = LOBBY_OPTIONS[optionKey][0];\n    const choices = LOBBY_OPTIONS[optionKey].slice(1);\n\n    let optionChoices = [];\n    choices.forEach((choice, choiceIndex)=>{\n      optionChoices.push(\n        <ListSelectOption \n          key={choice} \n          title={choice}\n          selected={choiceIndex===selectedChoice}\n          onClick={() => this.props.onClick(optionKey, choiceIndex)} />\n      );\n    });\n\n    return (\n      <div className=\"list-select\">\n        <span className=\"list-select-title\">{selectTitle}</span>\n        <div className=\"list-select-options\">{optionChoices}</div>\n      </div>\n    );\n\n\n  }\n}\n\nclass ListSelectOption extends React.Component {\n  render() {\n    const title = this.props.title;\n    const selected = this.props.selected;\n    const className = selected ? 'active' : '';\n\n    return (\n      <span className={className} onClick={() => this.props.onClick()}>{title}</span>\n    );\n\n  }\n}\n\n\nclass PlayerConfig extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.shipCatalogue = [0, 1, 2, 3, 4];\n    this.catalogueIndex = 0;\n\n    this.state = {\n      ship: this.shipCatalogue[this.catalogueIndex],\n      // abilities: [3x],\n      expanded: false\n    }\n\n  }\n\n  refreshShip() {\n    this.setState({\n      ship: this.shipCatalogue[this.catalogueIndex]\n    });\n  }\n\n  nextShip() {\n    this.catalogueIndex++;\n    if(this.catalogueIndex > this.shipCatalogue.length-1) this.catalogueIndex = 0;\n    this.refreshShip();\n  }\n\n  prevShip() {\n    this.catalogueIndex--;\n    if(this.catalogueIndex < 0) this.catalogueIndex = this.shipCatalogue.length-1;\n    this.refreshShip();\n  }\n\n  handleClick(isLeft) {\n    if(this.props.ready) return;\n    isLeft ? this.prevShip() : this.nextShip();\n  }\n\n  handleExpansionToggle() {\n    this.setState({\n      expanded: !this.state.expanded\n    });\n  }\n\n  handleActionClick() {\n    ENV.lobby.start(this.state.ship);\n  }\n\n  render() {\n    let playerConfigClass = ( this.props.joined ? ( this.props.ready ? 'disabled' : '' ) : 'hidden' ) ;\n    let shadeClass = ( this.props.joined ? ( this.props.ready ? 'opacity-5' : 'opacity-0' ) : 'opacity-10' ) ;\n\n    return (\n      <div id=\"player-config\" className={playerConfigClass}>\n        <div id=\"player-config-shade\" className={shadeClass}></div>\n        <ShipPicker ship={this.state.ship} onClick={(isLeft) => this.handleClick(isLeft)} />\n        <ShipDesc ship={this.state.ship} />\n        <ShipStats ship={this.state.ship} expanded={this.state.expanded} />\n        <ShipSub ship={this.state.ship} expanded={this.state.expanded} />\n        <div id=\"ability-action-box\">\n          {/*<AbilityBubbles />*/}\n          <div id=\"ability-action-box-row\">\n            <span onClick={() => this.handleExpansionToggle()}>{this.state.expanded ? 'less' : 'more'}</span>\n            <ActionButton\n              joined={this.props.joined}\n              ready={this.props.ready}\n              full={this.props.full}\n              ongoing={this.props.ongoing}\n              onClick={() => this.handleActionClick() } />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n}\n\nclass ShipPicker extends React.Component {\n\n\n  render() {\n    const i = this.props.ship;\n    const typeName = REF.ship.type[i];\n\n    return (\n      <div id=\"ship-picker\">\n        <span\n          id=\"ship-picker-left\"\n          className=\"ship-picker-arrow\"\n          onClick={() => this.props.onClick(true)}>&lt;</span>\n        <span id=\"ship-picker-text\"\n              onClick={() => this.props.onClick(false)}>{typeName.toUpperCase()}</span>\n        <span\n          id=\"ship-picker-right\"\n          className=\"ship-picker-arrow\"\n          onClick={() => this.props.onClick(false)}>&gt;</span>\n      </div>\n    );\n  }\n}\n\nclass ShipDesc extends React.Component {\n\n  render() {\n    const i = this.props.ship;\n    const typeName = REF.ship.type[i];\n    const imagePath = IMAGES.ship[i];\n    const typeDesc = REF.ship.typeDesc[i];\n    \n    return (\n      <div id=\"ship-desc\">\n        <div id=\"ship-desc-image\">\n          <div id=\"ship-desc-image-background\"></div>\n          <img src={imagePath} alt={typeName + ' ship image'} id=\"ship-desc-image-mask\" draggable=\"false\"/>\n        </div>\n        <span id=\"ship-desc-text\">{typeDesc}</span>\n      </div>\n    );\n  }\n}\n\nclass ShipStats extends React.Component {\n\n  render() {\n\n    const className = this.props.expanded ? '' : 'collapsed';\n\n    let rows = [];\n    for(let metric of REF.ship.stats) {\n      const title = metric[0];\n      const value = metric.slice(1)[this.props.ship];\n      rows.push(<ShipStatsRow key={title} title={title} value={value} />);\n    }\n\n    return (\n      <div id=\"ship-stats\" className={className}>\n        {rows}\n      </div>\n    );\n  }\n}\n\nclass ShipStatsRow extends React.Component {\n\n  render() {\n    return (\n      <div className=\"ship-stats-row\">\n        <span className=\"ship-stats-row-label\">{this.props.title}</span>\n        <span className=\"ship-stats-bar\">\n          <span className={'ship-stats-bar-value-' + this.props.value*10}></span>\n        </span>\n      </div>\n    );\n  }\n}\n\n\nclass ShipSub extends React.Component {\n  render() {\n\n    const className = this.props.expanded ? '' : 'collapsed';\n\n    const i = this.props.ship;\n    const subName = REF.ship.sub[i];\n    const imagePath = IMAGES.shipSub[i];\n\n    return (\n      <div id=\"ship-sub\" className={className}>\n        <span id=\"ship-sub-label\">SUB</span>\n        <div id=\"ship-sub-image\">\n          <div id=\"ship-sub-image-background\"></div>\n          <img src={imagePath} alt={subName + ' ship sub image'} id=\"ship-sub-image-mask\" draggable=\"false\"/>\n        </div>\n        <span id=\"ship-sub-title\">{subName}</span>\n      </div>\n    );\n  }\n}\n\nclass ActionButton extends React.Component {\n\n  render() {\n\n    let buttonTitle;\n    let className = '';\n    let actionBlock = () => {};\n    if(this.props.joined) {\n      if(this.props.ready) {\n        buttonTitle = 'waiting...';\n        className = 'disabled';\n      } else {\n        buttonTitle = 'START';\n        actionBlock = () => { this.props.onClick(); }\n      }\n    } else {\n      if(this.props.ongoing) {\n        buttonTitle = 'IN PROGRESS';\n        className = 'hollow';\n      } else {\n        if(this.props.full) {\n          buttonTitle = 'LOBBY FULL';\n          className = 'hollow';\n        } else {\n          buttonTitle = 'CONNECT';\n          actionBlock = () => { ENV.lobby.join() }\n        }\n      }\n    }\n\n    // const buttonTitle = ['CONNECT', 'START', 'waiting...', 'LOBBY FULL'][this.props.userEngagementPhase];\n    // const className = this.props.userEngagementPhase===3 ? 'disabled' : '';\n    return (\n      <button className={className} onClick={() => actionBlock()}>{buttonTitle}</button>\n    );\n  }\n}\n\n\nclass LobbyUsers extends React.Component {\n\n  render() {\n    const players = this.props.users.players;\n    const spectators = this.props.users.spectators;\n    const limit = this.props.playerLimit;\n\n    return (\n      <div id=\"lobby-users\">\n        <PlayersTable users={players} limit={limit}/>\n        <SpectatorsTable users={spectators}/>\n      </div>\n    );\n  }\n}\n\nclass PlayersTable extends React.Component {\n\n  render() {\n\n    let rows = [];\n    let index = 0;\n    for(let [id, name, rank, team, ready] of this.props.users) {\n\n      let highlight = ENV.user.id === id ? 'highlight' : '';\n      ready = ready ? 'âœ“' : '';\n      let sign = (rank % 100 <= 30 ? '-' : (rank % 100 >= 70 ? '+' : ''));\n      let rankSymbol = `${User.calculateRankLetter(rank) + sign}`;\n      team = team || 'SOLO';\n      rows.push(\n        <tr key={name+rank} className={highlight}>\n          <td>{++index + '.'}</td>\n          <td>{ready}</td>\n          <td>{name}</td>\n          <td>{rankSymbol}</td>\n          <td>{team}</td>\n        </tr>\n      )\n    }\n    let left = this.props.limit - this.props.users.length;\n    const over = left > 3;\n    if(over) left = 3;\n    for(let i = 0; i < left; i++) {\n      rows.push(\n        <tr key={++index} className=\"empty-row\">\n          <td></td>\n          <td></td>\n          <td>{'empty'}</td>\n          <td></td>\n          <td></td>\n        </tr>\n      )\n    }\n    if(over) {\n      rows.push(\n        <tr key={++index} className=\"empty-row\">\n          <td></td>\n          <td></td>\n          <td>{'...'}</td>\n          <td></td>\n          <td></td>\n        </tr>\n      )\n    }\n\n    return (\n      <table id=\"players-table\" className=\"users-table\">\n        <thead>\n          <tr>\n            <th></th>\n            <th></th>\n            <th>PLAYERS</th>\n            <th>RANK</th>\n            <th>TEAM</th>\n          </tr>\n        </thead>\n        <tbody>\n          {rows}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nclass SpectatorsTable extends React.Component {\n\n  render() {\n\n    let rows = [];\n    let index = 0;\n    for(let name of this.props.users) {\n      index++;\n      rows.push(\n        <tr key={name+index}>\n          <td>{name}</td>\n        </tr>\n      )\n    }\n\n    return (\n      <table id=\"spectators-table\" className=\"users-table\">\n        <thead>\n        <tr>\n          <th>SPECTATING ({index})</th>\n        </tr>\n        </thead>\n        <tbody>\n        {rows}\n        </tbody>\n      </table>\n    );\n  }\n}\n\n\n/*class ProductCategoryRow extends React.Component {\n  render() {\n    return <tr><th colSpan=\"2\">{this.props.category}</th></tr>;\n  }\n}\n\nclass ProductRow extends React.Component {\n  render() {\n    var name = this.props.product.stocked ?\n      this.props.product.name :\n      <span style={{color: 'red'}}>\n        {this.props.product.name}\n      </span>;\n    return (\n      <tr>\n        <td>{name}</td>\n        <td>{this.props.product.price}</td>\n      </tr>\n    );\n  }\n}\n\nclass ProductTable extends React.Component {\n  render() {\n    var rows = [];\n    var lastCategory = null;\n    this.props.products.forEach(function(product) {\n      if (product.category !== lastCategory) {\n        rows.push(<ProductCategoryRow category={product.category} key={product.category} />);\n      }\n      rows.push(<ProductRow product={product} key={product.name} />);\n      lastCategory = product.category;\n    });\n    return (\n      <table>\n        <thead>\n        <tr>\n          <th>Name</th>\n          <th>Price</th>\n        </tr>\n        </thead>\n        <tbody>{rows}</tbody>\n      </table>\n    );\n  }\n}\n\nclass SearchBar extends React.Component {\n  render() {\n    return (\n      <form>\n        <input type=\"text\" placeholder=\"Search...\" />\n        <p>\n          <input type=\"checkbox\" />\n          {' '}\n          Only show products in stock\n        </p>\n      </form>\n    );\n  }\n}\n\nclass FilterableProductTable extends React.Component {\n  render() {\n    return (\n      <div>\n        <SearchBar />\n        <ProductTable products={this.props.products} />\n      </div>\n    );\n  }\n}*/\n\n\n// var PRODUCTS = [\n//   {category: 'Sporting Goods', price: '$49.99', stocked: true, name: 'Football'},\n//   {category: 'Sporting Goods', price: '$9.99', stocked: true, name: 'Baseball'},\n//   {category: 'Sporting Goods', price: '$29.99', stocked: false, name: 'Basketball'},\n//   {category: 'Electronics', price: '$99.99', stocked: true, name: 'iPod Touch'},\n//   {category: 'Electronics', price: '$399.99', stocked: false, name: 'iPhone 5'},\n//   {category: 'Electronics', price: '$199.99', stocked: true, name: 'Nexus 7'}\n// ];\n\nlet INFO = {\n  type: 1,\n  code: 'Hkd3M-',\n  password: null,\n  game_settings: {\n    map: 2,\n    mode: 0,\n    stock: 3,\n    player_capacity: 6,\n  },\n  users: {\n    players: [\n      // {name, rank, team, ready, ship, slots []}\n\n      ['Billy', 302, 1, true, 2],\n      ['twenty-one p', 380, 1, false, 1],\n      ['user1902', 340, 0, true, 1],\n\n    ],\n    spectators: [\n      'markees',\n      'facemace'\n    ]\n  }\n};\n\nconst LOBBY_OPTIONS = {\n  map: ['MAP', 'Wide Sky', 'Nautical'],\n  mode: ['GAME MODE', 'Capture the Flag', 'Territorial'],//, 'Survival'],\n  player_capacity: ['MAX PLAYERS', '2', '3', '4', '5', '6', '7', '8'],\n  stock: ['STOCK', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10']\n};\n\nconst REF = {\n  lobby: {\n    type: ['public', 'private', 'practice'],\n    typeDesc: [\n      'This is a public lobby. Players present have complete control over game settings',\n      'This is a private lobby. Players present have complete control over game settings',\n      'This is a practice lobby. Players present have complete control over game settings',\n    ]\n  },\n\n  ship: {\n    type: ['standard', 'rate', 'speed', 'defense', 'damage'],\n    typeDesc: [\n      'a tune with the world and itself, this is the balanced ship',\n      'this ship produces a stream of light bullets to trap and confuse',\n      'run your way out of any situation with the speed ship',\n      'take more than just a hit with the defense ship',\n      'this ship is feared across the reach of space, use it wisely'\n    ],\n    sub: ['attractor', 'heat seeker', 'repulsors', 'stealth', 'block bomb'],\n    stats: [\n      ['HEALTH' , '0.6', '0.6', '0.2', '1.0', '0.7'],\n      ['SPEED'  , '0.6', '0.6', '0.9', '0.4', '0.4'],\n      ['ATTACK' , '0.5', '0.4', '0.3', '0.5', '1.0'],\n      ['RANGE'  , '0.5', '0.5', '0.3', '0.7', '0.4'],\n    ]\n\n  },\n\n  results: {\n    modeMeasure: ['distance', 'amount covered', 'time lasted']\n  }\n\n};\n\nconst IMAGES = {\n  ship: [\n    'images/menu-ship-standard.png',\n    'images/menu-ship-rate.png',\n    'images/menu-ship-speed.png',\n    'images/menu-ship-defense.png',\n    'images/menu-ship-damage.png',\n  ],\n  shipSub: [\n    'images/menu-ship-sub-standard.png',\n    'images/menu-ship-sub-rate.png',\n    'images/menu-ship-sub-speed.png',\n    'images/menu-ship-sub-defense.png',\n    'images/menu-ship-sub-damage.png',\n  ]\n};\n\n// ReactDOM.render(\n//   <DSGameLobby data={INFO} />,\n//   document.getElementById('container')\n// );\n\n\n\n\n"]}